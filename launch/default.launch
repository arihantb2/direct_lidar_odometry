<!--

  Copyright (c) 2021, University of California, Los Angeles

  Authors: Kenny J. Chen, Brett T. Lopez
  Contact: kennyjchen@ucla.edu, btlopez@ucla.edu

-->

<launch>

  <arg name="pointcloud_topic" default="/velodyne_points"/>
  <arg name="imu_topic" default="/imu/data"/>
  <arg name="wheel_odom_topic" default="/odom"/>

  <arg name="set_pose_topic" default="/initialpose"/>

  <!-- DLO Odometry Node -->
  <node ns="er_slam" name="dlo_sam" pkg="direct_lidar_odometry" type="dlo_odom_node" output="screen" clear_params="true" respawn="true">

    <!-- Load parameters -->
    <rosparam file="$(find direct_lidar_odometry)/cfg/dlo.yaml" command="load"/>
    <rosparam file="$(find direct_lidar_odometry)/cfg/params.yaml" command="load"/>

    <!-- Subscriptions -->
    <remap from="~pointcloud" to="$(arg pointcloud_topic)"/>
    <remap from="~imu" to="$(arg imu_topic)"/>
    <remap from="~wheel_odom" to="$(arg wheel_odom_topic)"/>
    <remap from="~set_pose" to="$(arg set_pose_topic)"/>

    <!-- Publications -->
    <remap from="~odom" to="dlo/odom"/>
    <remap from="~pose" to="dlo/pose"/>
    <remap from="~keyframe_odom" to="dlo/keyframe_odom"/>
    <remap from="~map" to="/cloud_pcd"/>
    <remap from="~submap" to="dlo/submap"/>
    <remap from="~keyframe" to="dlo/keyframe"/>

  </node>

</launch>
